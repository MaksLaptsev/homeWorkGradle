/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5/samples
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'java'
}
allprojects{
    group 'ru.clevertec'
    version '1.0'
}

subprojects.each { subproject -> evaluationDependsOn(subproject.path)}

tasks.withType(Jar) {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE}

task allJar(type: Jar, dependsOn: subprojects.assemble) {
    doFirst{
        manifest {
            attributes('Implementation-Title': project.name,
                    'Implementation-Version':project.version,
                    'Main-Class': 'ru.clevertec.App' )

        }
    }
        subprojects.each { subproject ->
        from subproject.configurations.archives.allArtifacts.files.collect {
            zipTree(it)
        }
    }
}